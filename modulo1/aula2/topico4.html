<!DOCTYPE html>
<html lang="pt-br">
<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=yes" />
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="robots" content="noindex" />
		<meta name="author" content="Fiocruz, Campus Virtual" />
		<meta name="description" content="Curso Introdução à Análise de Dados para pesquisa no SUS" />
		<meta name="keywords" content="Fiocruz Curso Introdução à Análise de Dados para pesquisa no SUS" />

		<!-- Facebook Open Graph -->
		<meta property="og:url" content="https://mooc.campusvirtual.fiocruz.br/rea/etica-integridade-pesquisa" />
		<meta property="og:title" content="Campus Virtual Fiocruz | Curso Introdução à Análise de Dados para pesquisa no SUS" />
		<meta property="og:description" content="Curso Introdução à Análise de Dados para pesquisa no SUS" />
		<meta property="og:image" content="" />
		<meta property="og:image:width" content="1080" />
		<meta property="og:image:height" content="1080" />
		<meta property="og:type" content="website" />

		<!-- Twitter Cards -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content="Campus Virtual Fiocruz | Curso Introdução à Análise de Dados para pesquisa no SUS" />
		<meta name="twitter:url" content="" />
		<meta name="twitter:description" content="" />
		<meta name="twitter:image:src" content="" />

		<!-- Favicons and Touch Icons -->
		<link rel="apple-touch-icon" sizes="57x57" href="../../media/icons/apple-icon-57x57.png" />
		<link rel="apple-touch-icon" sizes="60x60" href="../../media/icons/apple-icon-60x60.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="../../media/icons/apple-icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="76x76" href="../../media/icons/apple-icon-76x76.png" />
		<link rel="apple-touch-icon" sizes="114x114" href="../../media/icons/apple-icon-114x114.png" />
		<link rel="apple-touch-icon" sizes="120x120" href="../../media/icons/apple-icon-120x120.png" />
		<link rel="apple-touch-icon" sizes="144x144" href="../../media/icons/apple-icon-144x144.png" />
		<link rel="apple-touch-icon" sizes="152x152" href="../../media/icons/apple-icon-152x152.png" />
		<link rel="apple-touch-icon" sizes="180x180" href="../../media/icons/apple-icon-180x180.png" />

		<link rel="icon" type="image/png" sizes="192x192" href="../../media/icons/android-icon-192x192.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="../../media/icons/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="96x96" href="../../media/icons/favicon-96x96.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="../../media/icons/favicon-16x16.png" />
		<link rel="manifest" href="../media/icons/manifest.json" />

		<meta name="msapplication-TileColor" content="#ffffff" />
		<meta name="msapplication-TileImage" content="../../media/icons/ms-icon-144x144.png" />
		<!-- <meta name="theme-color" content="#003066" /> -->
		<meta name="theme-color" content="#001833" />

		<title>Curso Introdução à Análise de Dados para pesquisa no SUS | Mod 1 | Aula 2</title>

		<!-- Bootstrap CSS 5.1.3 -->
		<link rel="stylesheet" href="../../source/bootstrap-5.1.3/css/bootstrap.min.css" />

		<!-- Project CSS -->
		<link rel="stylesheet" href="../../assets/css/style.css" />
	</head>

<body>
	<header class="header">
		<div class="mobile-toggle-open">
			<a class="mobile-toggle__button" tabindex="0" role="button">
				<span class="icon material-symbols-rounded">read_more</span>
			</a>
		</div>
		<div class="brand">
			<img class="img-fluid logo-black" src="../../media/logos/header-fiocruz-campus-virtual.png" alt="Campus Virtual Fiocruz" />
		</div>
		<div class="title">
			<h1>Introdução à Análise de Dados para pesquisa no SUS</h1>
		</div>
		<ul class="nav nav-pills">
			<li class="nav-item"><a href="../../index.html" class="nav-link">Início</a></li>
			<li class="nav-item"><a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#modal-creditos">Créditos</a></li>
			<li class="nav-item"><a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#modal-glossario">Glossário</a></li>
		</ul>
	</header>
	<div class="main">
		<div class="sidebar" role="navigation">
			<div class="sidebar__inner">
				<div class="sidebar__group d-lg-none">
					<div class="sidebar__group-item">
						<div class="sidebar__header">
							<span>Curso</span>
							<a class="mobile-toggle-close" tabindex="0" role="button"><span class="icon material-symbols-rounded">read_more</span></a>
						</div>
					</div>
					<div class="sidebar__group-item">
						<div class="sidebar__title">
							<h1>Introdução à Análise de Dados para pesquisa no SUS</h1>
						</div>
					</div>
					<div class="sidebar__group-item">
						<ul class="nav">
							<li class="nav-item">
								<a href="../../index.html" class="nav-link" tabindex="0"><span class="icon material-symbols-rounded" aria-hidden="true">home</span>Início</a>
							</li>
							<li class="nav-item">
								<a href="#" class="nav-link" tabindex="0" data-bs-toggle="modal" data-bs-target="#modal-creditos"><span class="icon material-symbols-rounded" aria-hidden="true"> format_list_bulleted</span>Créditos</a>
							</li>
						</ul>
					</div>
				</div>

				<div class="sidebar__group">
					<div class="sidebar__group-item">
						<div class="dropend">
							<button id="dropdown-modulos" type="button" class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside" data-bs-offset="0,30">
								<span class="icon material-symbols-rounded" aria-hidden="true">grid_view</span>
								<span class="label">Módulos</span>
							</button>
							<ul class="dropdown-menu" aria-labelledby="dropdown-modulos">
								<li class="d-lg-none dropdown-menu__header">
									<a class="dropdown-menu__back-button" tabindex="0" role="button"><span class="icon material-symbols-rounded">chevron_left</span> Voltar</a>
									<a class="mobile-toggle-close" tabindex="0" role="button"><span class="icon material-symbols-rounded">read_more</span></a>
								</li>
								<li class="dropdown-menu__item">
									<a class="dropdown-menu__item-link" tabindex="0" role="link" href="../../modulo1/apresentacao.html"><strong>Módulo
											1</strong><br />Fundamentos de Saúde Digital e Tecnologia da Informação em
										Saúde</a>
								</li>
								<li class="dropdown-menu__item">
									<a class="dropdown-menu__item-link" tabindex="0" role="link" href="../../modulo2/apresentacao.html"><strong>Módulo 2</strong><br />Sistemas
										de informação em saúde e gestão de dados eletrônicos</a>
								</li>
								<li class="dropdown-menu__item">
									<a class="dropdown-menu__item-link" tabindex="0" role="link" href="../../modulo3/apresentacao.html"><strong>Módulo 3</strong><br />Segurança
										da informação e proteção de dados pessoais</a>
								</li>


							</ul>
						</div>
					</div>
				</div>
				<div class="divider">
					<hr />
				</div>
				<div class="sidebar__group">
					<div class="sidebar__group-item">
						<span class="text module">Módulo <br class="d-none d-lg-block" /><span>1</span></span>
					</div>
					<div class="sidebar__group-item">
						<div class="dropend">
							<button type="button" class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside" data-bs-offset="0,30">
								<span class="icon material-symbols-rounded" aria-hidden="true">apps</span>
								<span class="label">Conteúdo</span>
							</button>
							<ul class="dropdown-menu">
								<li class="d-lg-none dropdown-menu__header">
									<a class="dropdown-menu__back-button" tabindex="0" role="button"><span class="icon material-symbols-rounded">chevron_left</span> Voltar</a>
									<a class="mobile-toggle-close" tabindex="0" role="button"><span class="icon material-symbols-rounded">read_more</span></a>
								</li>
								<li class="dropdown-menu__title">
									<span class="label">Módulo 1</span>
									<span class="title">Lógica e Linguagem de Programação</span>
								</li>
								<li class="dropdown-menu__item">
									<a class="dropdown-menu__item-link" tabindex="0" role="link" href="../apresentacao.html"><strong>Apresentação do módulo</strong></a>
								</li>
								<li class="dropdown-menu__item">
									<a class="dropdown-menu__item-link" tabindex="0" role="link" href="../aula1/topico1.html"><strong>Aula 1: </strong>Introdução à Lógica de programação</a>
								</li>
								<li class="dropdown-menu__item">
									<a class="dropdown-menu__item-link" tabindex="0" role="link" href="../aula2/topico1.html"><strong>Aula 2: </strong>Introdução a Linguagem de Programação</a>
								</li>
								<li class="dropdown-menu__item">
									<a class="dropdown-menu__item-link" tabindex="0" role="link" href="../atividade.html"><strong>Atividade</a>
								</li>
								<li class="dropdown-menu__item">
									<a class="dropdown-menu__item-link" tabindex="0" role="link" href="../encerramento.html"><strong>Resumo do módulo</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="divider">
					<hr />
				</div>
				<div class="sidebar__group">
					<div class="sidebar__group-item">
						<span class="text class">Aula 2</span>
					</div>
					<div class="sidebar__group-item">
						<div class="dropend">
							<button type="button" class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside" data-bs-offset="200,30">
								<span class="icon material-symbols-rounded" aria-hidden="true">
									format_list_bulleted</span>
								<span class="label">Tópicos</span>
							</button>
							<ul class="dropdown-menu">
								<li class="d-lg-none dropdown-menu__header">
									<a class="dropdown-menu__back-button" tabindex="0" role="button"><span class="icon material-symbols-rounded">chevron_left</span> Voltar</a>
									<a class="mobile-toggle-close" tabindex="0" role="button"><span class="icon material-symbols-rounded">read_more</span></a>
								</li>
								<li class="dropdown-menu__title">
									<span class="label">Aula 2</span>
									<span class="title">Transformação digital em saúde e no SUS</span>
								</li>
								<li class="dropdown-menu__item">
									<nav class="topic-list">
										<a href="topico1.html" tabindex="0" role="link" class="topic-list__item" aria-label="Tópico concluído" status="visited"> <span class="material-symbols-rounded"></span>Introdução</a>

										<a href="topico2.html" tabindex="0" role="link" class="topic-list__item" aria-label="Tópico concluído" status="visited"> <span class="material-symbols-rounded"></span>Linguagem de programação R</a>

										<a href="topico3.html" tabindex="0" role="link" class="topic-list__item" aria-label="Tópico concluído" status="visited"><span class="material-symbols-rounded"></span>Funções no R</a>

										<a href="topico4.html" tabindex="0" role="link" class="topic-list__item" aria-label="Tópico concluído" status="visited"><span class="material-symbols-rounded"></span>Criando uma nova variável utilizando operações lógicas</a>

										<a href="topico5.html" tabindex="0" role="link" class="topic-list__item" aria-label="Tópico não concluído"><span class="material-symbols-rounded"></span>Agrupamento de Dados</a>
									</nav>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="divider">
					<hr />
				</div>
				<div class="sidebar__group extra">
					<div class="sidebar__group-item">
						<button type="button" class="" data-bs-toggle="modal" data-bs-target="#modal-bibliografiaMod1">
							<span class="icon material-symbols-rounded" aria-hidden="true"> menu_book</span>
							<span class="label">Bibliografia</span>
						</button>
					</div>
				</div>
			</div>
		</div>

		<div class="content">
			<div id="page-title">
				<div class="container">
					<div class="row align-items-center hstify-content-center justify-content-xxl-start ms-lg-5">
						<div class="col-12 col-md-10 col-lg-11">
							<h2 class="title">
								<span class="label">Módulo 1 | Aula 2</span>
								<br />
								Introdução a Linguagem de Programação
							</h2>
						</div>
					</div>
				</div>
			</div>

			<div id="page-content" class="">
				<!-- Inserir o conteúdo aqui -->
				<section>
					<div class="container">
						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="heading__block">
									<span class="small">Tópico 4</span>
									<h3 class="heading__title">Criando uma variável utilizando operações lógicas</h3>
								</div>

								<p>No <strong>dplyr</strong> temos a função chamada <span class="color-tertiary-dark"><strong>if_else</strong></span>, que é o mesmo que o se/se não, da aula de lógica de programação. Então, vamos usá-lo. Para usar o <span class="color-tertiary-dark"><strong>if_else</strong></span>, primeiro mostrei a sintaxe de um caso simples, depois a aplicaremos na variável SEXO.</p>
								<p>A sintaxe do <span class="color-tertiary-dark"><strong>mutate</strong></span> em conjunto com o <span class="color-tertiary-dark"><strong>if_else</strong></span> é: primeiro, definimos a variável que receberá o resultado (no exemplo a seguir chamamos de <span class="color-tertiary-dark"><strong>variavel</strong></span>), seguida pelo operador de atribuição =. Em seguida, utilizamos o <span class="color-tertiary-dark"><strong>if_else</strong></span>, que recebe três parâmetros: o primeiro é a condição a ser avaliada; o segundo, o valor retornado se a condição for verdadeira; e o terceiro, o valor retornado se a condição for falsa. Vale a pena explorar a documentação do <span class="color-tertiary-dark"><strong>if_else</strong></span> no R para entender melhor e verificar outros parâmetros disponíveis para essa função.</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<!-- CÓDIGO -->
								<div class="code-example-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<pre aria-label="Exemplo de código"><code>
dataframe &lt;-  dataframe %>% mutate(variavel = if_else(condicao, verdadeiro,falso))
									</code></pre>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>Agora, você deverá ir até o nosso repositório para aplicar no RStudio a condicional com mutate para criar uma variável em nossos dados.</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="variable">df_csv &lt;-</span> <span class="">df_csv %>%</span>
  <span class="function">mutate(</span>
    <span class="variable">sexo_p =</span> <span class="function">if_else(</span><span class="">SEXO ==</span> <span class="number">1</span>, "Masculino",
                        <span class="function">if_else(</span>SEXO == <span class="number">2</span>, "Feminino", 
                                <span class="function">if_else(</span>SEXO == <span class="number">0</span>, "Ignorado", NA_character_<span class="function">)))</span>
  <span class="function">)</span>
										</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>No <strong>dplyr</strong> temos a função chamada de <span class="color-tertiary-dark"><strong>case_when</strong></span>, que tem a mesma funcionalidade do <span class="color-tertiary-dark"><strong>if_else</strong></span>; entretanto, principalmente quando temos mais de duas condições a ser verificada, a sintaxe adequada é a seguinte:</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<!-- CÓDIGO -->
								<div class="code-example-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<pre aria-label="Exemplo de código"><code>
case_when( 
	condição1 ~ resultado1, 
	condição2 ~ resultado2, 
	condição3 ~ resultado3, 
	TRUE ~ resultado_padrão )
									</code></pre>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>Agora vamos aplicar aos nossos dados o <span class="color-tertiary-dark"><strong>case_when</strong></span>, no repositório.</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="variable">df_csv &lt;-</span> <span class="">df_csv %>%</span>
  <span class="function">mutate(</span>
    <span class="variable">sexo_p =</span> <span class="function">case_when(</span><span class="">
	  SEXO == <span class="number">1</span> ~ "Masculino",
	  SEXO == <span class="number">2</span> ~ "Feminino",
	  SEXO == <span class="number">0</span> ~ "Ignorado", 
	  <span class="function">is.na(</span><SEXOspan class="function">) ~ NA_character_ <span class="comment"># Mantém o NA original
    <span class="function">)</span>
  <span class="function">)</span>
										</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>O uso do <span class="color-tertiary-dark"><strong>case_when</strong></span>, nesse caso, torna o código mais organizado e legível. Dentro do <span class="color-tertiary-dark"><strong>mutate</strong></span>, começamos definindo o nome da variável, seguido pelo operador de atribuição (=). Após o <span class="color-tertiary-dark"><strong>case_when</strong></span>, podemos adicionar quantas condições forem necessárias para resolver o problema, separando cada uma por vírgulas. Por exemplo, a primeira condição é <span class="color-tertiary-dark"><strong>SEXO == 1 ~ "Masculino"</strong></span>, ou seja, se o valor de SEXO for igual a 1, o resultado será "Masculino", e assim por diante.</p>
								<p>É importante destacar que, quando uma condição é verdadeira, o <span class="color-tertiary-dark"><strong>case_when</strong></span> não verifica as demais. Ao aplicar o <span class="color-tertiary-dark"><strong>case_when</strong></span> dessa forma, todas as linhas do <span class="color-tertiary-dark"><strong>dataframe</strong></span> são verificadas e uma nova coluna é criada, que chamamos de sexo_p (com "p" de padronizado). Agora, vamos verificar a frequência dessa (nova) variável.</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<figure class="lightbox aos-init aos-animate" data-aos="fade-up" data-aos-easing="ease-out" data-aos-duration="600">
									<img class="img-fluid rounded mx-auto d-block mb-3" src="../../media/modulo1/aula2-img12.jpg" alt="" title="Fonte: Elaborada pelo autor (2025)." />
									<figcaption class="figure-caption">Fonte: Elaborada pelo autor (2025).</figcaption>
								</figure>
							</div>
						</div>

						<div class="row justify-content-center mt-5">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="heading__block">
									<h4 class="heading__title">Alterando a Variável de Data</h4>
								</div>

								<p>Outra variável que vamos alterar é a <span class="color-tertiary-dark"><strong>DTOBITO</strong></span>, que representa a <strong>data do óbito</strong>. Ao executar o comando <span class="color-tertiary-dark"><strong>glimpse</strong></span>, percebemos que a variável <span class="color-tertiary-dark"><strong>DTOBITO</strong></span> está no tipo <span class="color-tertiary-dark"><strong>"caracter"</strong></span>, mas sabemos que se trata de uma data.</p>
								<p>Para realizar operações com datas, como:</p>

								<div class="list">
									<ul class="list-group">
										<li class="list-group-item aos-init aos-animate" list-style="default" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300"><strong>Subtrair dias de uma data,</strong></li>
										<li class="list-group-item aos-init aos-animate" list-style="default" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300"><strong>Adicionar dias,</strong></li>
										<li class="list-group-item aos-init aos-animate" list-style="default" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300"><strong>Calcular a diferença entre duas datas,</strong></li>
									</ul>
								</div>

								<p>Precisamos que a variável esteja no tipo <span class="color-tertiary-dark"><strong>Date</strong></span>, que é o tipo apropriado para lidar com datas no R.</p>
								<p>Para facilitar o trabalho com datas no R, utilizaremos o pacote <span class="color-tertiary-dark"><strong>lubridate</strong></span>, que está incluído no <span class="color-tertiary-dark"><strong>Tidyverse</strong></span>. Ele fornece funções simples e intuitivas para manipulação de datas.</p>
								<p>Carregue o pacote <span class="color-tertiary-dark"><strong>lubridate</strong></span> no início do código, assim como fez anteriormente com outros pacotes.</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="function">library(</span><span class="variable">df_csv &lt;-</span><span class="function">)</span> <span class="comment"># carrega o pacote lubridate</span>
										</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p class="mb-0">Depois, crie uma variável do tipo date chamada de <span class="color-tertiary-dark"><strong>dt_DTOBITO</strong></span>, usando o <span class="color-tertiary-dark"><strong>mutate</strong></span> novamente. As datas nos bancos de dados podem aparecer em vários formatos, mas os dois mais comuns são:</p>
								<div class="list">
									<ul class="list-group">
										<li class="list-group-item aos-init aos-animate" list-style="default" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300"><strong>Formato brasileiro:</strong> dia/mês/ano (dd/mm/yyyy)</li>
										<li class="list-group-item aos-init aos-animate" list-style="default" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300"><strong>Formato americano:</strong> ano/mês/dia (yyyy/mm/dd)</li>
									</ul>
								</div>

								<p>No nosso caso, ao observar a variável <span class="color-tertiary-dark"><strong>DTOBITO</strong></span> usando <span class="color-tertiary-dark"><strong>glimpse</strong></span>, notamos que as datas estão no formato "<span class="color-tertiary-dark"><strong>ddmmyyyy</strong></span>" (por exemplo, 24072023 para o dia 24 de julho de 2023).</p>
							</div>
						</div>

						<div class="row justify-content-center mt-5">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="heading__block">
									<h4 class="heading__title">Funções do lubridate para Manipulação de Datas</h4>
								</div>

								<p>O pacote <span class="color-tertiary-dark"><strong>lubridate</strong></span> oferece muitas funções para trabalhar com diferentes formatos de datas. A função <span class="color-tertiary-dark"><strong>ymd()</strong></span> é especialmente útil quando você precisa converter uma data no formato <strong>ano/mês/dia</strong> (mesmo que os valores estejam juntos, como no nosso caso).</p>
								<p>Vamos utilizar <span class="color-tertiary-dark"><strong>ymd()</strong></span> para transformar a variável <span class="color-tertiary-dark"><strong>DTOBITO</strong></span>, que atualmente está no formato de texto, em uma data do tipo <span class="color-tertiary-dark"><strong>Date</strong></span>.</p>
								<p><strong>Alterando e Criando Variáveis no Mutate</strong></p>
								<p>O <span class="color-tertiary-dark"><strong>mutate</strong></span> pode ser usado para criar ou alterar múltiplas variáveis de uma só vez, separando cada nova operação por vírgula. Aqui, vamos:</p>

								<div class="list">
									<ol class="list-group list-group-numbered">
										<li class="list-group-item aos-init aos-animate" list-style="default" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300"><strong>Converter a variável</strong> <span class="color-tertiary-dark"><strong>DTOBITO</strong></span> para o formato de data usando <span class="color-tertiary-dark"><strong>ymd()</strong></span>.</li>
										<li class="list-group-item aos-init aos-animate" list-style="default" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300"><strong>Criar uma variável</strong> <span class="color-tertiary-dark"><strong>ano_obito</strong></span> que extrai o ano a partir da data de óbito, utilizando a função <span class="color-tertiary-dark"><strong>year()</strong></span> do <span class="color-tertiary-dark"><strong>lubridate</strong></span>.</li>
									</ol>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="variable">df_csv &lt;-</span> df_csv %>%
<span class="function">mutate(</span><span class="variable">DTOBITO_dt</span> = <span class="function">ymd(</span><span class="variable">DTOBITO</span><span class="function">)</span>, <span class="comment"># Converte DTOBITO para data</span>
<span class="variable">ano_obito</span> = <span class="function">year(</span><span class="variable">DTOBITO_dt</span><span class="function">)</span> <span class="comment"># Extrai o ano da data de óbito</span>
<span class="function">)</span>
									</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>Agora, temos:</p>
								<div class="list">
									<ul class="list-group">
										<li class="list-group-item aos-init aos-animate" list-style="default" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300"><span class="color-tertiary-dark"><strong>DTOBITO_dt</strong></span> no formato correto de data, pronto para operações com datas.</li>
										<li class="list-group-item aos-init aos-animate" list-style="default" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300"><span class="color-tertiary-dark"><strong>ano_obito</strong></span>, uma nova variável, que contém apenas o ano extraído da data.</li>
									</ul>
								</div>
							</div>
						</div>
					</div>

					<div class="container-fluid px-0">
						<div class="destaque-parallax my-0">
							<div class="custom-shape-divider-top-1720289331">
								<svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
									<path d="M1200 120L0 16.48 0 0 1200 0 1200 120z" class="shape-fill"></path>
								</svg>
							</div>

							<div class="container">
								<div class="row justify-content-center">
									<div class="col-12 col-md-10 col-lg-8">
										<p>No R, a ordem das operações importa! Nesse caso, para garantir que tudo funcione corretamente, você precisa primeiro converter a variável <span class="color-secondary-medium d-inline"><strong>DTOBITO</strong></span> em uma data, e só depois extrair o ano. Isso acontece porque a função que extrai o ano (no caso, year()) só funciona corretamente com variáveis do tipo Date. Se você tentar fazer na ordem errada, o resultado não será o esperado.</p>
									</div>
								</div>
							</div>

							<div class="custom-shape-divider-bottom-1720289984">
								<svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
									<path d="M1200 120L0 16.48 0 0 1200 0 1200 120z" class="shape-fill"></path>
								</svg>
							</div>
						</div>
					</div>

					<div class="container">
						<div class="row justify-content-center mt-5">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="saiba-mais pb-5">
									<div class="row aos-init aos-animate" data-aos="fade-left" data-aos-easing="ease-out" data-aos-duration="600">
										<div class="col-12 d-flex justify-content-center">
											<button class="saiba-mais fio-button button-md fio-button-secondary collapsed" type="collapsed" data-bs-toggle="collapse" data-bs-target="#saiba-mais1" aria-expanded="false" aria-controls="saiba-mais1"><span class="icone material-symbols-rounded" aria-hidden="true"></span> Você sabia?</button>
										</div>
										<div class="col-12">
											<div class="mt-3 collapse" id="saiba-mais1">
												<p>Acesse o site oficial do lubridate: https://lubridate.tidyverse.org/</p>
												<p class="mb-0">Para saber mais, confira um resumo com dicas de uso no link: </p>

												<div class="list">
													<ul class="list-group">
														<li class="list-group-item aos-init aos-animate" list-style="page" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300">
															<a href="https://rstudio.github.io/cheatsheets/html/lubridate.html" target="_blank">https://rstudio.github.io/cheatsheets/html/lubridate.html</a>
														</li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>Agora, utilize de novo a função <span class="color-tertiary-dark"><strong>glimpse()</strong></span>. Você verá as alterações realizadas no seu <span class="color-tertiary-dark"><strong>data frame</strong></span>.</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="function">glimpse(</span><span class="variable">df_csv</span><span class="function">)</span>
										
Abaixo. será o que aparecerá no seu console:

DTOBITO    <chr> "01012023", "01012023", "01012023", "01012023", "01012023", "01012023", "01012023"
DTOBITO_dt <date> 2023-01-01, 2023-01-01, 2023-01-01, 2023-01-01, 2023-01-01, 2023-01-01, 2023-01-01
ano_obito  <dbl> 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, 2023, …
									</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>Agora vamos rever a função de contagem. Aqui está a comparação entre o uso da função <span class="color-tertiary-dark"><strong>table()</strong></span> do R base e a função <span class="color-tertiary-dark"><strong>count()</strong></span> do <span class="color-tertiary-dark"><strong>Tidyverse</strong></span> para contar a frequência de óbitos por ano e por sexo:</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="comment"># Frequência de óbitos por sexo</span>
<span class="function">table(</span><span class="variable">df_csv</span>$<span class="variable">sexo_p</span>,useNA = “always”<span class="function">)</span> 
<span class="comment"># Frequência de óbitos por ano de óbito</span>
<span class="function">table(</span><span class="variable">df_csv</span>$<span class="variable">ano_obito</span>, useNA = “always”<span class="function">)</span> 

vs. 
Comando:

<span class="comment"># Frequência de óbitos por sexo</span>
<span class="variable">df_csv</span> %>%  <span class="function">count(</span><span class="variable">sexo_p</span><span class="function">)</span>
<span class="comment"># Frequência de óbitos por ano de óbito</span>
<span class="variable">df_csv</span> %>% <span class="function">count(</span><span class="variable">ano_obito</span><span class="function">)</span>

Ainda podemos simplificar ainda mais a operação acima:

Comando: 

<span class="comment"># Frequência de óbitos por sexo e ano de óbito</span>
<span class="variable">df_csv</span> %>% <span class="function">count(</span><span class="variable">sexo_p</span>, <span class="variable">ano_obito</span><span class="function">)</span>
									</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<figure class="lightbox aos-init aos-animate" data-aos="fade-up" data-aos-easing="ease-out" data-aos-duration="600">
									<img class="img-fluid rounded mx-auto d-block mb-3" src="../../media/modulo1/aula2-img13.jpg" alt="" title="Fonte: Elaborada pelo autor (2025)." />
									<figcaption class="figure-caption">Fonte: Elaborada pelo autor (2025).</figcaption>
								</figure>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>Observe que todos os óbitos são do ano de 2023. Agora, vamos alterar a variável IDADE. Confira no dicionário de dados como funciona essa variável. Iremos alterar todas as observações para anos. Usaremos agora outro pacote para manipular character(também chamado de <a class="" tabindex="0" role="button" data-bs-toggle="popover" data-bs-trigger="focus" title="" data-bs-html="true" data-bs-content="O pacote stringr é utilizado no R para manipulação de strings (textos) de maneira simples e consistente. Ele facilita tarefas como busca, substituição, extração e modificação de textos, permitindo realizar operações comuns de forma eficiente, como encontrar padrões, contar caracteres e ajustar formatações. É ideal para o processamento e limpeza de dados textuais. " data-bs-original-title="String">string</a>), carregue o pacote stringr do tidyverse.</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="saiba-mais pb-5">
									<div class="row aos-init aos-animate" data-aos="fade-left" data-aos-easing="ease-out" data-aos-duration="600">
										<div class="col-12 d-flex justify-content-center">
											<button class="saiba-mais fio-button button-md fio-button-secondary collapsed" type="collapsed" data-bs-toggle="collapse" data-bs-target="#saiba-mais2" aria-expanded="false" aria-controls="saiba-mais2"><span class="icone material-symbols-rounded" aria-hidden="true"></span> Você sabia?</button>
										</div>
										<div class="col-12">
											<div class="mt-3 collapse" id="saiba-mais2">
												<p class="mb-0">A folha de resumo de utilização do strings pode ser encontrada no link:</p>

												<div class="list">
													<ul class="list-group">
														<li class="list-group-item aos-init aos-animate" list-style="pdf" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="1200" data-aos-delay="300">
															<a href="https://rstudio.github.io/cheatsheets/translations/portuguese/strings_pt_br.pdf" target="_blank">https://rstudio.github.io/cheatsheets/translations/portuguese/strings_pt_br.pdf</a>
														</li>
													</ul>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="function">library(</span><span class="variable">stringr</span><span class="function">)</span>
										</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>A variável idade tem uma codificação conforme dicionário de dados. O primeiro elemento da string varia de 0 a 5 , indica a unidade da idade, em horas, dias meses etc., enquanto os dígitos seguintes indicam a quantidade de unidades. Por exemplo, 204 significa que a idade está em dias e o indivíduo tinha 4 dias; 305 seria 5 meses, e assim por diante. Vamos alterar para anos.</p>
								<p>Nosso primeiro passo vai ser dividir a string idade em duas, para simplificar. Usaremos a função do pacote stringr chamada <span class="color-tertiary-dark"><strong>str_sub()</strong></span>, que extrai uma parte da string, usando parâmetros como a string a ser extraída, o início e o final da nossa extração.</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="variable">?str_sub</span> <span class="comment"># abrir a documentação</span>
										</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<figure class="lightbox aos-init aos-animate" data-aos="fade-up" data-aos-easing="ease-out" data-aos-duration="600">
									<img class="img-fluid rounded mx-auto d-block mb-3" src="../../media/modulo1/aula2-img14.jpg" alt="" title="Fonte: Documentação da library stringR no RStudio (2025)." />
									<figcaption class="figure-caption">Fonte: Documentação da library stringR no RStudio (2025).</figcaption>
								</figure>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>Essa função recebe como parâmetro uma <span class="color-tertiary-dark"><strong>string</strong></span>, depois dois valores representando o começo e o final que queremos extrair dela. Criaremos duas variáveis, uma que chamaremos de <span class="color-tertiary-dark"><strong>tipo_idade</strong></span> referente ao primeiro elemento da <span class="color-tertiary-dark"><strong>string</strong></span>, e a segunda em relação ao restante da <span class="color-tertiary-dark"><strong>string</strong></span>, chamada idade. Confira o código a seguir que adicionaremos ao nosso <span class="color-tertiary-dark"><strong>mutate</strong></span>.</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="variable">df_csv</span> &lt;- <span class="variable">df_csv</span> %>%
  <span class="function">mutate(</span> <span class="variable">tipo_idade</span> = stringr::<span class="function">str_sub(</span>IDADE,1,1<span class="function">)</span>, <span class="comment"># extrair o primeiro elemento</span>
    <span class="variable">idade</span> = stringr::<span class="function">str_sub(</span>IDADE,2<span class="function">)</span> <span class="comment"># extrair do segundo elemento em diante</span>
  <span class="function">)</span>
										</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>
						
						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<p>Iremos agora usar <span class="color-tertiary-dark"><strong>tipo_idade</strong></span> e idade em uma <span class="color-tertiary-dark"><strong>case_when</strong></span> para criar uma nova variável de idade contendo somente idades em anos. Em seguida, aplicamos nossa lógica com base no dicionário de dados e análise do banco para criar a variável idade em anos.</p>
								<p>Podemos encadear todas as funções que aprendemos. Use o comando a seguir:</p>
							</div>
						</div>

						<div class="row justify-content-center">
							<div class="col-12 col-md-10 col-lg-8 mb-5">
								<div class="code-container aos-init aos-animate" data-aos="fade-right" data-aos-easing="ease-out" data-aos-duration="600">
									<div class="heading__block">
										<h5 class="heading__title">Na prática</h5>
									</div>

									<pre aria-label="Exemplo de código"><code>
Comando:

<span class="variable">df_csv</span> &lt;- <span class="variable">df_csv</span> %>%
  <span class="function">mutate(</span>
    <span class="variable">sexo_p</span> = <span class="function">case_when(</span>
      <span class="variable">SEXO</span> == 1 ~ "Masculino",
      <span class="variable">SEXO</span> == 2 ~ "Feminino",
      <span class="variable">SEXO</span> == 0 ~ "Ignorado",
      <span class="function">is.na(</span><span class="variable">SEXO</span><span class="function">)</span> ~ NA_character_  <span class="comment"># Mantém o NA original</span>
    <span class="function">)</span>,
   <span class="variable">DTOBITO_2</span> = <span class="function">dmy(</span><span class="variable">DTOBITO</span><span class="function">)</span>,
    <span class="variable">ano_obito</span> = <span class="function">year(</span><span class="variable">dt_DTOBITO</span><span class="function">)</span>,
    <span class="variable">tipo_idade</span> = stringr::<span class="function">str_sub(</span>IDADE,1,1<span class="function">)</span>, <span class="comment"># extrair o primeiro elemento</span>
    <span class="variable">idade</span> = stringr::<span class="function">str_sub(</span>IDADE,2<span class="function">)</span>, <span class="comment"># extrair do segundo elemento em diante</span>
    <span class="variable">idade_anos</span> = <span class="function">case_when(</span>  <span class="comment"># condicional para criar idade em anos</span>
      <span class="variable">tipo_idade</span> &lt;= 3 ~ 0, <span class="comment"># se menor igual a 3 seria 0 anos</span>
      <span class="variable">tipo_idade</span> == 4 ~ <span class="variable">idade</span>, <span class="comment"># 4 já está em anos somente capturar</span>
      <span class="variable">tipo_idade</span> == 5 ~ 100 + <span class="variable">idade</span> <span class="comment"># 5 somar 100</span>
    <span class="function">)</span>
  <span class="function">)</span>
										</code></pre>
									<button class="copy-btn" aria-label="Copiar código para a área de transferência">Copiar</button>
									<button class="copy-btn">Copiar</button>
								</div>
							</div>
						</div>
					</div>
				</section>
			</div>

			<!-- Navegação da aula -->
			<section>
				<div class="container">
					<div class="row justify-content-center">
						<div class="col-12 col-md-10 col-lg-8">
							<div class="page-nav d-flex justify-content-evenly">
								<a class="fio-button fio-button-primary" href="topico3.html" rel="prev"><span class="material-symbols-rounded">west</span> Tópico anterior</a>
								<a class="fio-button fio-button-primary" href="topico5.html" rel="next">Próximo tópico
									<span class="material-symbols-rounded" aria-hidden="true">east</span></a>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>

		<footer>
			<div class="container-fluid">
				<div class="row justify-content-center align-items-center linha-de-marcas">
					<div class="col-12 col-md-auto">
						<ul class="logos">
							<!-- <li class="realizacao"> -->
							<li>
								<img class="img-fluid logo1" src="../../media/logos/logo-icict-vertical.svg" alt="Logo do ICICT" height="" />
							</li>

							<li>
								<img class="img-fluid logo2" src="../../media/logos/logo-campus-horizontal.png" alt="Logo do Campus Virtual Fiocruz" height="" />
							</li>

							<li>
								<img class="img-fluid logo3" src="../../media/logos/logo-fiocruz-horizontal-black.png" alt="Logo da Fiocruz" height="" />
							</li>
						</ul>
					</div>

					<div class="col-12 col-md-auto">
						<ul class="logos principais align-self-end">
							<li>
								<img class="img-fluid logo4" src="../../media/logos/logo-sus-digital-cor.png" alt="Logo do SUS Digital" height="" />
							</li>

							<li>
								<img class="img-fluid logo5 d-none d-md-block" src="../../media/logos/ministerio-saude-gov-federal.png" alt="Logos do SUS, Ministério da Saúde e Governo Federal" height="" />
							</li>

							<li>
								<img class="img-fluid logo6 d-block d-md-none" src="../../media/logos/ministerio-saude-gov-federal-mobile.png" alt="Logos do SUS, Ministério da Saúde e Governo Federal" height="" />
							</li>
						</ul>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<!--  Bootstrap JS and Popper -->
	<script src="../../source/bootstrap-5.1.3/js/bootstrap.bundle.min.js"></script>

	<!-- Sticky Sidebar -->
	<script type="text/javascript" src="../../assets/js/ResizeSensor.js"></script>
	<script type="text/javascript" src="../../assets/js/sticky-sidebar.js"></script>
	<script type="text/javascript" src="../../assets/js/sidebar.js"></script>

	<script type="text/javascript">
		var sidebar = new StickySidebar('.sidebar', {
			topSpacing: 0,
			bottomSpacing: 0,
			containerSelector: '.main',
			innerWrapperSelector: '.sidebar__inner',
			minWidth: 991,
		});
	</script>

	<!-- Code -->
	<script src="../../assets/js/code.js"></script>

	<!-- Swiper -->
	<script src="../../assets/js/swiper-bundle.min.js"></script>
	<script src="../../assets/js/swiper-init.js"></script>

	<script type="text/javascript" src="../../assets/js/scripts.js"></script>
	<script type="text/javascript" src="../../assets/js/custom-anime.js"></script>
	<script type="text/javascript" src="../../source/animate/aos/dist/aos.js"></script>

	<!-- Timeline horizontal -->
	<script src="../../assets/js/timeline-horizontal/util.js"></script>
	<!-- util functions included in the CodyHouse framework -->
	<script src="../../assets/js/timeline-horizontal/swipe-content.js"></script>
	<!-- A Vanilla JavaScript plugin to detect touch interactions -->
	<script src="../../assets/js/timeline-horizontal/main.js"></script>
	<!-- Start the Timeline -->
	<script>
		document.getElementsByTagName('html')[0].className += ' js';
	</script>

	<script>
		AOS.init();
	</script>
</body>

</html>